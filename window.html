<!DOCTYPE html>
<html>
  <head>
    <title>RaceBox by AirBirds.de</title>
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css" >
    <link rel="stylesheet" href="assets/flipclock.css" >
    <script src="jquery-2.2.0.min.js" ></script>
    <script src="bootstrap/js/bootstrap.min.js" ></script>
    <script src="serial_connection.js"></script>
    <script src="channel_data.js"></script>
    <script src="moment.min.js"></script>
    <script src="assets/flipclock.min.js"></script>
     <style>
       .scrollable{
         overflow-y:scroll;
       }
       .raw_table_data{
         height: 400px;
       }
       .serial_console{
         height: 200px;
       }
       body{
         margin-top: 85px;
       }
       
      .navbar{
        min-height: 85px;
        background-color: black;
      }
      html, body {
        overflow-y: visible;
      }
      .navbar{
        background-color: #f2a900;
      }
      #realtime_clock{
        font-size: 16pt;
      }
     </style>
  </head>
  <body>
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#"><img src="assets/img/racebox_logo.png"></a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li class="dropdown" style="display:none;" id="menu_debug">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Debug <span class="caret"></span></a>
              <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                <li>
                  <a href="#" id="button_debug_track_time"><span class="glyphicon glyphicon-thumbs-up" aria-hidden="true"></span>
                    Fill Sample Time Data
                  </a>
                </li>
              </ul>
            </li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="row">
      <div class="col-xs-12">
        <div class="panel panel-default" id="connect_panel">
          <div class="panel-body">
            <div class="form-inline">
              <button class="btn btn-primary" id="button_connect">
                <span class="glyphicon glyphicon-play" aria-hidden="true"></span>
                Connect
              </button>
              <div class="form-group">
                <select name="select_serial_port" id="select_serial_port" class="form-control">
                </select>
              </div>
              <span id="helpBlock" class="help-block">
                Drivers can be found <a href="http://bit.ly/1r4PF7l" target="_blank">here</a>. Firmware flashing tool can be found <a href="http://russemotto.com/xloader/" target="_blank">here</a>
                </span>
            </div>
          </div>
        </div>
        <div class="panel panel-default" id="control_panel" style="display:none;">
          <div class="panel-body">
            <div class="row">
              <div class="col-xs-3">
                Firmware:
                <span id="firmware_version"></span>
              </div>
              <div class="col-xs-9">
                <button class="btn btn-danger" id="button_disconnect">Disconnect</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="row">
      <div class="col-xs-12">
        <div class="alert alert-success" role="alert" id="message_box" style="display:none"></div>
        <ul class="nav nav-tabs" role="tablist">
          <li role="presentation" class="active"><a href="#tab_time_tracking" aria-controls="tab_time_tracking" role="tab" data-toggle="tab">TimeTracking</a></li>
          <li role="presentation"><a href="#tab_race_box_settings" aria-controls="tab_race_box_settings" role="tab" data-toggle="tab">RaceBox Settings</a></li>
          <li role="presentation"><a href="#tab_settings" aria-controls="tab_settings" role="tab" data-toggle="tab">Settings</a></li>
        </ul>
      
      <div class="tab-content">
        <div role="tabpanel" class="tab-pane active" id="tab_time_tracking">
            <div class="panel panel-default">
              <div class="panel-body">
                <div class="row">
                  <div class="col-md-3">
                    <div class="center-block">
                        <div class="realtime-clock"></div>
                    </div>
                  </div>
                  <div class="col-md-9">
                    <button class="btn btn-primary" id="button_save_timing_data">
                      <span class="glyphicon glyphicon-save" aria-hidden="true"></span>
                      Save Timing Data
                    </button>
                    <button class="btn btn-primary" id="button_start_fpv_sports_io_race">
                      <span class="glyphicon glyphicon-fast-forward" aria-hidden="true"></span>
                      Start FPV-SPORTS.IO Race
                    </button>
                    <button class="btn btn-primary" id="button_start_race">
                      <span class="glyphicon glyphicon-fast-forward" aria-hidden="true"></span>
                      Start Race
                    </button>
                    <button class="btn btn-warning" id="button_stop_race" style="display: none;">
                      <span class="glyphicon glyphicon-stop" aria-hidden="true"></span>
                      Stop Race
                    </button>
                  </div>
                </div>
              </div>
            </div>
            <table class="table table-bordered table-striped">
              <thead>
                <tr>
                  <th>Pos</th>
                  <th>Pilot</th>
                  <th>Lap 1</th>
                  <th>Lap 2</th>
                  <th>Lap 3</th>
                  <th>Lap 4</th>
                  <th>Lap 5</th>
                  <th>Lap 6</th>
                </tr>
              </thead>
              <tbody id="time_tracking_table_body">
              </tbody>
            </table>
        </div>
        <div role="tabpanel" class="tab-pane" id="tab_race_box_settings">
            <div class="panel panel-default">
              <div class="panel-body">
                <input type="text" id="input_min_lap_time" placeholder="min lap time, eg: 6000" class="">
                <button class="btn btn-primary" id="button_set_min_lap_time">Set Min Lap Time</button>
                <div class="pull-right">
                  <button class="btn btn-primary" id="button_read_saved_channels">Read Saved Channels</button>
                  <button class="btn btn-primary" id="button_read_saved_rssi_strength">Read Saved RSSI</button>
                  <button class="btn btn-primary" id="button_read_current_rssi_strength" >Scan Current RSSI</button>
                  <button class="btn btn-primary" id="button_read_min_lap_time" >Read Min Lap Time</button>
                  <button class="btn btn-primary" id="button_read_smart_sense" >Read SmartSense</button>
                  <button class="btn btn-primary" id="button_read_smart_sense_cutt_off" >Read Min SmartSense CutOff</button>
                </div>
              </div>
            </div>
            <table class="table table-bordered table-striped">
              <thead>
                  <tr>
                      <th>Sensor</th>
                      <th>VTX Channel</th>
                      <th>Trigger RSSI</th>
                      <th>Current RSSI</th>
                      <th>Min Lap Time (ms)</th>
                      <th>SmartSense Strength</th>
                      <th>SmartSense CutOff</th>
                      <th>
                  </tr>
              </thead>
              <tbody>
                  <tr>
                    <td>Sensor 1</td>
                    <td><select id="rb_settings_sensor_1_channel" class="form-control"></select></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_1_saved_rssi"></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_1_current_rssi" readonly></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_1_min_lap_time" readonly></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_1_smart_sense_strength" readonly></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_1_smart_sense_cut_off" ></td>
                    <td>
                      <button class="btn btn-primary btn_set_saved_rssi_strength btn-xs" rel="1">Save RSSI Strength</button>
                      <button class="btn btn-primary btn_set_smart_sense_cut_off btn-xs" rel="1">Save CutOff</button>
                      <button class="btn btn-primary btn_set_channel btn-xs" rel="1">Save Channel</button>
                    </td>
                  </tr>
                  <tr>
                    <td>Sensor 2</td>
                    <td><select id="rb_settings_sensor_2_channel" class="form-control"></select></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_2_saved_rssi"></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_2_current_rssi" readonly></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_2_min_lap_time" readonly></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_2_smart_sense_strength" readonly></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_2_smart_sense_cut_off" ></td>
                    <td>
                      <button class="btn btn-primary btn_set_saved_rssi_strength btn-xs" rel="2">Save RSSI Strength</button>
                      <button class="btn btn-primary btn_set_smart_sense_cut_off btn-xs" rel="2">Save CutOff</button>
                      <button class="btn btn-primary btn_set_channel btn-xs" rel="2">Save Channel</button>
                    </td>
                  </tr>
                  <tr>
                    <td>Sensor 3</td>
                    <td><select id="rb_settings_sensor_3_channel" class="form-control"></select></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_3_saved_rssi"></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_3_current_rssi" readonly></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_3_min_lap_time" readonly></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_3_smart_sense_strength" readonly></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_3_smart_sense_cut_off" ></td>
                    <td>
                      <button class="btn btn-primary btn_set_saved_rssi_strength btn-xs" rel="3">Save RSSI Strength</button>
                      <button class="btn btn-primary btn_set_smart_sense_cut_off btn-xs" rel="3">Save CutOff</button>
                      <button class="btn btn-primary btn_set_channel btn-xs" rel="3">Save Channel</button>
                    </td>
                  </tr>
                  <tr>
                    <td>Sensor 4</td>
                    <td><select id="rb_settings_sensor_4_channel" class="form-control"></select></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_4_saved_rssi"></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_4_current_rssi" readonly></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_4_min_lap_time" readonly></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_4_smart_sense_strength" readonly></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_4_smart_sense_cut_off" ></td>
                    <td>
                      <button class="btn btn-primary btn_set_saved_rssi_strength btn-xs" rel="4">Save RSSI Strength</button>
                      <button class="btn btn-primary btn_set_smart_sense_cut_off btn-xs" rel="4">Save CutOff</button>
                      <button class="btn btn-primary btn_set_channel btn-xs" rel="4">Save Channel</button>
                    </td>
                  </tr>
                  <tr>
                    <td>Sensor 5</td>
                    <td><select id="rb_settings_sensor_5_channel" class="form-control"></select></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_5_saved_rssi"></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_5_current_rssi" readonly></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_5_min_lap_time" readonly></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_5_smart_sense_strength" readonly></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_5_smart_sense_cut_off" ></td>
                    <td>
                      <button class="btn btn-primary btn_set_saved_rssi_strength btn-xs" rel="5">Save RSSI Strength</button>
                      <button class="btn btn-primary btn_set_smart_sense_cut_off btn-xs" rel="5">Save CutOff</button>
                      <button class="btn btn-primary btn_set_channel btn-xs" rel="5">Save Channel</button>
                    </td>
                  </tr>
                  <tr>
                    <td>Sensor 6</td>
                    <td><select id="rb_settings_sensor_6_channel" class="form-control"></select></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_6_saved_rssi"></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_6_current_rssi" readonly></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_6_min_lap_time" readonly></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_6_smart_sense_strength" readonly></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_6_smart_sense_cut_off" ></td>
                    <td>
                      <button class="btn btn-primary btn_set_saved_rssi_strength btn-xs" rel="6">Save RSSI Strength</button>
                      <button class="btn btn-primary btn_set_smart_sense_cut_off btn-xs" rel="6">Save CutOff</button>
                      <button class="btn btn-primary btn_set_channel btn-xs" rel="6">Save Channel</button>
                    </td>
                  </tr>
                  <tr>
                    <td>Sensor 7</td>
                    <td><select id="rb_settings_sensor_7_channel" class="form-control"></select></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_7_saved_rssi"></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_7_current_rssi" readonly></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_7_min_lap_time" readonly></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_7_smart_sense_strength" readonly></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_7_smart_sense_cut_off" ></td>
                    <td>
                      <button class="btn btn-primary btn_set_saved_rssi_strength  btn-xs" rel="7">Save RSSI Strength</button>
                      <button class="btn btn-primary btn_set_smart_sense_cut_off btn-xs" rel="7">Save CutOff</button>
                      <button class="btn btn-primary btn_set_channel btn-xs" rel="7">Save Channel</button>
                    </td>
                  </tr>
                  <tr>
                    <td>Sensor 8</td>
                    <td><select id="rb_settings_sensor_8_channel" class="form-control"></select></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_8_saved_rssi"></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_8_current_rssi" readonly></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_8_min_lap_time" readonly></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_8_smart_sense_strength" readonly></td>
                    <td><input type="text" class="form-control" id="rb_settings_sensor_8_smart_sense_cut_off" ></td>
                    <td>
                      <button class="btn btn-primary btn_set_saved_rssi_strength  btn-xs" rel="8">Save RSSI Strength</button>
                      <button class="btn btn-primary btn_set_smart_sense_cut_off  btn-xs" rel="8">Save CutOff</button>
                      <button class="btn btn-primary btn_set_channel btn-xs" rel="8">Save Channel</button>
                    </td>
                  </tr>
              </tbody>
            </table>
        </div>

        <div role="tabpanel" class="tab-pane" id="tab_settings">
          <div class="form-group">
            <label>Max Laps</label>
            <input type="text" id="setting_max_laps" class="form-control" placeholder: "max laps">
          </div>
          <div class="form-group">
            <label>FPV-SPORTS.IO API-Token</label>
            <input type="text" id="fpv_sports_api_token" class="form-control" placeholder: "FPV-SPORTS.IO API-Token">
          </div>
          <div class="form-group">
            <label>FPV-SPORTS.IO Racing Event</label>
            <select id="fpv_sports_racing_events" class="form-control"></select>
            <button id="btn_fetch_fpv_sports_racing_events" class="btn btn-primary">Fetch FPV-SPORTS.IO racing events</button>
          </div>
        </div>
      </div> <!-- tab content -->
      
      
      </div>
    </div> <!-- row -->
    <div class="row" id="container_serial_output" style="display:none;">
      <div class="col-xs-12">
        <div class="panel panel-default">
          <div class="panel-heading" >
            <h3 class="panel-title">Serial Output</h3>
          </div>
          <div class="panel-body scrollable serial_console" id="serial_output">
          </div>
        </div>
      </div>
    </div>
  
    

    
    
    

    <script src="util.js"></script>
    <script src="time_tracking_adapter.js"></script>
    <script src="fpv_sports_api.js"></script>
    <script src="app.js"></script>
  </body>
</html>
